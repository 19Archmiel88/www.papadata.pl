project_id = "papadata-platform-prod"
region     = "europe-central2"

# Primary domain
domain = "www.papadata.pl"

# Optional additional domains
additional_domains = []

# Cloud Run images
api_image = "europe-central2-docker.pkg.dev/PROJECT/REPO/papadata-api:TAG"
web_image = "europe-central2-docker.pkg.dev/PROJECT/REPO/papadata-web:TAG"

# API env
api_env = {
  APP_MODE               = "prod"
  PORT                   = "4000"
  CORS_ALLOWED_ORIGINS   = "https://www.papadata.pl"
  VERTEX_PROJECT_ID      = "papadata-platform-prod"
  VERTEX_LOCATION        = "europe-central2"
  VERTEX_MODEL           = "gemini-2.5-flash-lite"
  AI_ENABLED             = "true"
  AI_ENABLED_DEMO        = "false"
  AI_ENABLED_PROD        = "true"
  AI_TIMEOUT_MS          = "12000"
  AI_RATE_LIMIT_MAX      = "30"
  AI_RATE_LIMIT_WINDOW_MS = "60000"
}

# Web env
web_env = {
  VITE_API_BASE_URL        = "/api"
  VITE_API_TIMEOUT_MS      = "25000"
  VITE_API_AI_TIMEOUT_MS   = "60000"
  VITE_API_RETRY_MAX       = "2"
  VITE_API_RETRY_DELAY_MS  = "300"
  VITE_OBSERVABILITY_PROVIDER = "none"
}

# Secrets to create (versions added separately)
secret_names = [
  "JWT_SECRET",
  "STRIPE_SECRET_KEY"
]

# Map env var => secret name
api_secret_env = {
  JWT_SECRET        = "JWT_SECRET"
  STRIPE_SECRET_KEY = "STRIPE_SECRET_KEY"
}

web_secret_env = {}

# Cloud Armor
enable_cloud_armor     = true
cloud_armor_policy_name = "papadata-security-policy"
cloud_armor_rate_limit_count = 300
cloud_armor_rate_limit_interval_sec = 60
cloud_armor_rate_limit_ban_sec = 600

# HTTP -> HTTPS redirect
enable_http_to_https_redirect = true

# DNS
enable_dns      = false
create_dns_zone = false
# dns_zone_name = "papadata-pl"
# dns_zone_dns_name = "papadata.pl."

# Identity Platform
enable_identity_platform = true
identity_platform_authorized_domains = [
  "papadata-platform-prod.firebaseapp.com",
  "www.papadata.pl"
]
identity_platform_google_client_id = ""
identity_platform_google_client_secret = ""
identity_platform_microsoft_client_id = ""
identity_platform_microsoft_client_secret = ""

# Cloud SQL
cloud_sql_instance_name = "papadata-sql"
cloud_sql_database_version = "POSTGRES_15"
cloud_sql_tier = "db-f1-micro"
cloud_sql_disk_size_gb = 20
cloud_sql_ipv4_enabled = true
cloud_sql_database_name = "papadata"
cloud_sql_user_name = "papadata"
cloud_sql_user_password = "CHANGE_ME"
cloud_sql_private_only = true
enable_cloud_sql_auth_proxy = true
generate_cloud_sql_password = true
cloud_sql_password_secret_name = "CLOUD_SQL_PASSWORD"
enable_secret_rotation = true
secret_rotation_period = "2592000s"

# Cloud SQL Private IP (VPC/PSC)
enable_cloud_sql_private_ip = true
vpc_network_name = "papadata-vpc"
vpc_subnet_name = "papadata-subnet"
vpc_subnet_cidr = "10.10.0.0/24"
vpc_connector_name = "papadata-connector"
vpc_connector_cidr = "10.8.0.0/28"
vpc_connector_min_instances = 2
vpc_connector_max_instances = 3
private_service_range_prefix_length = 24
